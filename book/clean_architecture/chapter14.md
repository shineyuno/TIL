# 14장 컴포넌튼 결합

## ADP: 의존성 비순환 원칙
> 컴포넌트 의존성 그래프에 순환이 있어서는 안된다.

당신이 의존하고 있던 파일을 누군가 수정하면 당신 코드는 작동하지 않을수 있다.
개발팀 모두가 누군가가 마지막으로 수정한 코드 때문에 망가진 부분이 동작하도록 만들기 위해 코드를 
수정하고 또 수정하는 작업이 계속될 수 있다.
 
이 문제의 해결책
+ 주단위 빌드
+ 의존성 비순환 원칙 Acyclic Dependencies Principle, ADP

### 순환 의존성 제거하기
이 문제의 해결책은 개발 환경을 릴리스 가능한 컴포넌트 단위로 분리하는 것이다.
이를 통해 컴포넌트는 개별 개발자 또는 단일 개발팀이 책임질 수 있는 작업 단위가 된다.

어떤 팀도 다른 팀에 의해 좌우되지 않는다.
특정 컴포넌트가 변경되더라도 다른 팀에 즉각 영향을 주지는 않는다.
각 팀은 특정 컴포넌트가 새롭게 릴리스되면 자신의 컴포넌트를 해당 컴포넌트에 맞게 수정할 시기를 스스로 결정할 수 있다.
뿐만 아니라 통합은 작고 점진적으로 이뤄진다.
특정시점에 모든 개발자가 한데 모여서 진행중인 작업을 모두 통합하는 일은 사라진다.

이 절차가 성공적으로 동작하려면 컴포넌트 사이의 의존성 구조를 반드시 관리해야 한다.
의존성 구조에 순환이 있어서는 안된다.


### 순환이 컴포넌 의존성 그래프에 미치는 영향
순환이 생기면 컴포넌트를 분리하기가 상당히 어려워진다.
단위 테스트를 하고 릴리스를 하는 일도 굉장히 어려워지며 에러도 쉽게 발생한다.

의존성 그래프에 순환이 생기면 컴포넌트를 어떤 순서로 빌드해야 올바를지 파악하기가 상당히 힘들어진다.
사실 순환이 생기면 올바른 순서라는것 자체가 없을수 있다.

### 순환 끊기
컴포넌트 사이의 순환을 끊고 의존성을 다시 DAG로 원상복구하는 일은 언제라도 가능하다.
이를 위한 주요 매커니즘 두가지
+ 의존성 역전 원칙 DIP를 적용한다.
+ 모두 의존하는 새로운 컴포넌트를 만든다.  그리고 두 컴포넌트가 모두 의존하는 클래스들을 새로운 컴포넌트로 이동시킨다.

### 흐트러짐(Jitters)
두 번째 해결책에서 시사하는 바는 요구사항이 변경되면 컴포넌트 구조도 변경될 수 있다는 사실이다.
